{
  "version": 4,
  "terraform_version": "1.8.1",
  "serial": 106,
  "lineage": "f293449f-b755-7011-954e-07b91088d1cf",
  "outputs": {
    "airflow-webserver": {
      "value": "http://10.152.183.188:8080",
      "type": "string"
    },
    "kubernetes-dashboard": {
      "value": "https://10.152.183.37:443",
      "type": "string"
    },
    "kubernetes-dashboard-token": {
      "value": "eyJhbGciOiJSUzI1NiIsImtpZCI6Iks5dFVpU0dmUmdtbmh3MVVOTVFMRHVuTzJxWVFBajkyLUd5TkFidURsQ1UifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJtaWNyb2s4cy1kYXNoYm9hcmQtdG9rZW4iLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC5uYW1lIjoiZGVmYXVsdCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50LnVpZCI6IjE1MDMyOTM4LWQ0NDQtNDdlNi1hZjA5LWM3ZjA3OTBlMTA4MSIsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDprdWJlLXN5c3RlbTpkZWZhdWx0In0.b3XDWObPOvp9XFqWyJCcpBJEApxJ64uFkGCpBOZzpPH_u1P6TQoZ35jz9grHm1LFGWBrFWqRbQMnUpc7lvVVtrseB3KZfD9ygat9KMBpT4STf-JbSNJTX5NBnM5cn9RMAY0pSaAbUiY492wA23y0otEJimETkNfFytbCjK9SEcSfuAiZk97DBNKr2-XyZCcjU9ughJzRO8AXOMiSK6QpDwtuCZzp3nrcgCAo9Oyo80UTUaHNorESiSRMJJWf07fbXKxVP_-Sk5UB2QZovrrJB9FLlB-ZDZmfu_ywsm8UMiU9fTxmm2H0BDzVaQwn1VOjef4IKQ2ikdqLTW-E7OBk0Q",
      "type": "string"
    }
  },
  "resources": [
    {
      "mode": "data",
      "type": "external",
      "name": "microk8s-web-token",
      "provider": "provider[\"registry.terraform.io/hashicorp/external\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "-",
            "program": [
              "bash",
              "-c",
              "echo {\\\"token\\\":\\\"`microk8s kubectl -n kube-system describe secret | grep token: | awk '{print $2}'`\\\"}"
            ],
            "query": null,
            "result": {
              "token": "eyJhbGciOiJSUzI1NiIsImtpZCI6Iks5dFVpU0dmUmdtbmh3MVVOTVFMRHVuTzJxWVFBajkyLUd5TkFidURsQ1UifQ.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJtaWNyb2s4cy1kYXNoYm9hcmQtdG9rZW4iLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC5uYW1lIjoiZGVmYXVsdCIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VydmljZS1hY2NvdW50LnVpZCI6IjE1MDMyOTM4LWQ0NDQtNDdlNi1hZjA5LWM3ZjA3OTBlMTA4MSIsInN1YiI6InN5c3RlbTpzZXJ2aWNlYWNjb3VudDprdWJlLXN5c3RlbTpkZWZhdWx0In0.b3XDWObPOvp9XFqWyJCcpBJEApxJ64uFkGCpBOZzpPH_u1P6TQoZ35jz9grHm1LFGWBrFWqRbQMnUpc7lvVVtrseB3KZfD9ygat9KMBpT4STf-JbSNJTX5NBnM5cn9RMAY0pSaAbUiY492wA23y0otEJimETkNfFytbCjK9SEcSfuAiZk97DBNKr2-XyZCcjU9ughJzRO8AXOMiSK6QpDwtuCZzp3nrcgCAo9Oyo80UTUaHNorESiSRMJJWf07fbXKxVP_-Sk5UB2QZovrrJB9FLlB-ZDZmfu_ywsm8UMiU9fTxmm2H0BDzVaQwn1VOjef4IKQ2ikdqLTW-E7OBk0Q"
            },
            "working_dir": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "kubernetes_service_v1",
      "name": "airflow-webserver",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "airflow/airflow-webserver",
            "metadata": [
              {
                "annotations": {
                  "meta.helm.sh/release-name": "airflow",
                  "meta.helm.sh/release-namespace": "airflow"
                },
                "generation": 0,
                "labels": {
                  "app.kubernetes.io/managed-by": "Helm",
                  "chart": "airflow-1.15.0",
                  "component": "webserver",
                  "heritage": "Helm",
                  "release": "airflow",
                  "tier": "airflow"
                },
                "name": "airflow-webserver",
                "namespace": "airflow",
                "resource_version": "151331",
                "uid": "2881b604-78f2-42fe-b41d-1a4d2a1b0d90"
              }
            ],
            "spec": [
              {
                "allocate_load_balancer_node_ports": true,
                "cluster_ip": "10.152.183.188",
                "cluster_ips": [
                  "10.152.183.188"
                ],
                "external_ips": [],
                "external_name": "",
                "external_traffic_policy": "",
                "health_check_node_port": 0,
                "internal_traffic_policy": "Cluster",
                "ip_families": [
                  "IPv4"
                ],
                "ip_family_policy": "SingleStack",
                "load_balancer_class": "",
                "load_balancer_ip": "",
                "load_balancer_source_ranges": [],
                "port": [
                  {
                    "app_protocol": "",
                    "name": "airflow-ui",
                    "node_port": 0,
                    "port": 8080,
                    "protocol": "TCP",
                    "target_port": "8080"
                  }
                ],
                "publish_not_ready_addresses": false,
                "selector": {
                  "component": "webserver",
                  "release": "airflow",
                  "tier": "airflow"
                },
                "session_affinity": "None",
                "session_affinity_config": [],
                "type": "ClusterIP"
              }
            ],
            "status": [
              {
                "load_balancer": [
                  {
                    "ingress": []
                  }
                ]
              }
            ]
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "kubernetes_service_v1",
      "name": "kubernetes-dashboard",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "kube-system/kubernetes-dashboard",
            "metadata": [
              {
                "annotations": {
                  "kubectl.kubernetes.io/last-applied-configuration": "{\"apiVersion\":\"v1\",\"kind\":\"Service\",\"metadata\":{\"annotations\":{},\"labels\":{\"k8s-app\":\"kubernetes-dashboard\"},\"name\":\"kubernetes-dashboard\",\"namespace\":\"kube-system\"},\"spec\":{\"ports\":[{\"port\":443,\"targetPort\":8443}],\"selector\":{\"k8s-app\":\"kubernetes-dashboard\"}}}\n"
                },
                "generation": 0,
                "labels": {
                  "k8s-app": "kubernetes-dashboard"
                },
                "name": "kubernetes-dashboard",
                "namespace": "kube-system",
                "resource_version": "497",
                "uid": "89757545-75d7-4327-b303-5b33898c6243"
              }
            ],
            "spec": [
              {
                "allocate_load_balancer_node_ports": true,
                "cluster_ip": "10.152.183.37",
                "cluster_ips": [
                  "10.152.183.37"
                ],
                "external_ips": [],
                "external_name": "",
                "external_traffic_policy": "",
                "health_check_node_port": 0,
                "internal_traffic_policy": "Cluster",
                "ip_families": [
                  "IPv4"
                ],
                "ip_family_policy": "SingleStack",
                "load_balancer_class": "",
                "load_balancer_ip": "",
                "load_balancer_source_ranges": [],
                "port": [
                  {
                    "app_protocol": "",
                    "name": "",
                    "node_port": 0,
                    "port": 443,
                    "protocol": "TCP",
                    "target_port": "8443"
                  }
                ],
                "publish_not_ready_addresses": false,
                "selector": {
                  "k8s-app": "kubernetes-dashboard"
                },
                "session_affinity": "None",
                "session_affinity_config": [],
                "type": "ClusterIP"
              }
            ],
            "status": [
              {
                "load_balancer": [
                  {
                    "ingress": []
                  }
                ]
              }
            ]
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "archive_file",
      "name": "module-001",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "exclude_symlink_directories": null,
            "excludes": null,
            "id": "ffae6f03e7739eac0011f35fdc09cdb4587b41aa",
            "output_base64sha256": "+qNTaAqtTg8jxbRHh4VYojI0IzCiKAG+0pDqLr2ovqE=",
            "output_base64sha512": "M89eumENbF/zNZwM/S0cvyL/+Kg0so6N09L92REWwSVrFrNriw1b5/xzaL/otwLYlhKFeI3JV+BZu+tNt4Iy7w==",
            "output_file_mode": null,
            "output_md5": "aae5e155a9a7814986cdef3852a03b9e",
            "output_path": "/tmp/dags/M001.zip",
            "output_sha": "ffae6f03e7739eac0011f35fdc09cdb4587b41aa",
            "output_sha256": "faa353680aad4e0f23c5b447878558a232342330a22801bed290ea2ebda8bea1",
            "output_sha512": "33cf5eba610d6c5ff3359c0cfd2d1cbf22fff8a834b28e8dd3d2fdd91116c1256b16b36b8b0d5be7fc7368bfe8b702d8961285788dc957e059bbeb4db78232ef",
            "output_size": 2340,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": "../modules/M001",
            "source_file": null,
            "type": "zip"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "archive_file",
      "name": "module-002",
      "provider": "provider[\"registry.terraform.io/hashicorp/archive\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "exclude_symlink_directories": null,
            "excludes": null,
            "id": "d895f5773fbc633c0cccdecf589b5f5a08bd7fae",
            "output_base64sha256": "+n+hgyM+Dexu1UOXVmlSfTJWyEuL8MCug+4gsFeL5XU=",
            "output_base64sha512": "Px2xK0js7QC5NPu1GYakkdHF9yT+y5QVnKU6AnkgtOaEgdmUAsB2pnX3rKGAVLiQJ7Lg5Xhtt0goACqcHZszBA==",
            "output_file_mode": null,
            "output_md5": "518a88c89af914dd7288ce7dc276b2d5",
            "output_path": "/tmp/dags/M002.zip",
            "output_sha": "d895f5773fbc633c0cccdecf589b5f5a08bd7fae",
            "output_sha256": "fa7fa183233e0dec6ed543975669527d3256c84b8bf0c0ae83ee20b0578be575",
            "output_sha512": "3f1db12b48eced00b934fbb51986a491d1c5f724fecb94159ca53a027920b4e68481d99402c076a675f7aca18054b89027b2e0e5786db74828002a9c1d9b3304",
            "output_size": 2632,
            "source": [],
            "source_content": null,
            "source_content_filename": null,
            "source_dir": "../modules/M002",
            "source_file": null,
            "type": "zip"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "helm_release",
      "name": "airflow",
      "provider": "provider[\"registry.terraform.io/hashicorp/helm\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "atomic": false,
            "chart": "airflow",
            "cleanup_on_fail": false,
            "create_namespace": false,
            "dependency_update": false,
            "description": null,
            "devel": null,
            "disable_crd_hooks": false,
            "disable_openapi_validation": false,
            "disable_webhooks": false,
            "force_update": false,
            "id": "airflow",
            "keyring": null,
            "lint": false,
            "manifest": null,
            "max_history": 0,
            "metadata": [
              {
                "app_version": "2.9.3",
                "chart": "airflow",
                "first_deployed": 1727786000,
                "last_deployed": 1728554791,
                "name": "airflow",
                "namespace": "airflow",
                "notes": "CHART NAME: postgresql\nCHART VERSION: 13.2.24\nAPP VERSION: 16.1.0\n\n** Please be patient while the chart is being deployed **\n\nPostgreSQL can be accessed via port 5432 on the following DNS names from within your cluster:\n\n    airflow-postgresql.airflow.svc.cluster.local - Read/Write connection\n\nTo get the password for \"postgres\" run:\n\n    export POSTGRES_PASSWORD=$(kubectl get secret --namespace airflow airflow-postgresql -o jsonpath=\"{.data.postgres-password}\" | base64 -d)\n\nTo connect to your database run the following command:\n\n    kubectl run airflow-postgresql-client --rm --tty -i --restart='Never' --namespace airflow --image docker.io/bitnami/postgresql:16.1.0-debian-11-r15 --env=\"PGPASSWORD=$POSTGRES_PASSWORD\" \\\n      --command -- psql --host airflow-postgresql -U postgres -d postgres -p 5432\n\n    \u003e NOTE: If you access the container using bash, make sure that you execute \"/opt/bitnami/scripts/postgresql/entrypoint.sh /bin/bash\" in order to avoid the error \"psql: local user with ID 1001} does not exist\"\n\nTo connect to your database from outside the cluster execute the following commands:\n\n    kubectl port-forward --namespace airflow svc/airflow-postgresql 5432:5432 \u0026\n    PGPASSWORD=\"$POSTGRES_PASSWORD\" psql --host 127.0.0.1 -U postgres -d postgres -p 5432\n\nWARNING: The configured password will be ignored on new installation in case when previous PostgreSQL release was deleted through the helm command. In that case, old PVC will have an old password, and setting it through helm won't take effect. Deleting persistent volumes (PVs) will solve the issue.\n\n\n\n\nThank you for installing Apache Airflow 2.9.3!\n\nYour release is named airflow.\nYou can now access your dashboard(s) by executing the following command(s) and visiting the corresponding port at localhost in your browser:\n\nAirflow Webserver:     kubectl port-forward svc/airflow-webserver 8080:8080 --namespace airflow\nDefault Webserver (Airflow UI) Login credentials:\n    username: admin\n    password: admin\nDefault Postgres connection credentials:\n    username: postgres\n    password: postgres\n    port: 5432\n\nYou can get Fernet Key value by running the following:\n\n    echo Fernet Key: $(kubectl get secret --namespace airflow airflow-fernet-key -o jsonpath=\"{.data.fernet-key}\" | base64 --decode)\n\n###########################################################\n#  WARNING: You should set a static webserver secret key  #\n###########################################################\n\nYou are using a dynamically generated webserver secret key, which can lead to\nunnecessary restarts of your Airflow components.\n\nInformation on how to set a static webserver secret key can be found here:\nhttps://airflow.apache.org/docs/helm-chart/stable/production-guide.html#webserver-secret-key\n",
                "revision": 7,
                "values": "{\"airflow\":{\"connections\":[{\"conn_id\":\"http_dummyjson\",\"conn_type\":\"http\",\"host\":\"https://dummyjson.com/\"},{\"conn_id\":\"local_fs\",\"conn_type\":\"fs\"}]},\"createUserJob\":{\"applyCustomEnv\":false,\"useHelmHooks\":false},\"migrateDatabaseJob\":{\"applyCustomEnv\":false,\"useHelmHooks\":false},\"postgresql\":{\"enabled\":true},\"scheduler\":{\"extraVolumeMounts\":[{\"mountPath\":\"/opt/airflow/dags\",\"name\":\"dags\",\"readOnly\":true}],\"extraVolumes\":[{\"hostPath\":{\"path\":\"/tmp/dags/\",\"type\":\"Directory\"},\"name\":\"dags\"}]},\"workers\":{\"extraVolumeMounts\":[{\"mountPath\":\"/opt/airflow/dags\",\"name\":\"dags\",\"readOnly\":true}],\"extraVolumes\":[{\"hostPath\":{\"path\":\"/tmp/dags\",\"type\":\"Directory\"},\"name\":\"dags\"}]}}",
                "version": "1.15.0"
              }
            ],
            "name": "airflow",
            "namespace": "airflow",
            "pass_credentials": false,
            "postrender": [],
            "recreate_pods": false,
            "render_subchart_notes": true,
            "replace": false,
            "repository": "https://airflow.apache.org",
            "repository_ca_file": null,
            "repository_cert_file": null,
            "repository_key_file": null,
            "repository_password": null,
            "repository_username": null,
            "reset_values": false,
            "reuse_values": false,
            "set": [],
            "set_list": [],
            "set_sensitive": [],
            "skip_crds": false,
            "status": "deployed",
            "timeout": 360,
            "upgrade_install": null,
            "values": [
              "# enable embeded PostgreSQL\npostgresql:\n  enabled: true\n\ncreateUserJob:\n  useHelmHooks: false\n  applyCustomEnv: false\n\nmigrateDatabaseJob:\n  useHelmHooks: false\n  applyCustomEnv: false\n\nscheduler:\n  extraVolumes:\n    - name: dags\n      hostPath:\n        path: /tmp/dags/\n        type: Directory\n  extraVolumeMounts:\n    - name: dags\n      mountPath: /opt/airflow/dags\n      readOnly: true\n\nworkers:\n  extraVolumes:\n    - name: dags\n      hostPath:\n        path: /tmp/dags\n        type: Directory\n  extraVolumeMounts:\n    - name: dags\n      mountPath: /opt/airflow/dags\n      readOnly: true\n\nairflow:\n  connections:\n    - conn_id: http_dummyjson\n      conn_type: http\n      host: https://dummyjson.com/\n\n    - conn_id: local_fs\n      conn_type: fs\n"
            ],
            "verify": false,
            "version": "1.15.0",
            "wait": true,
            "wait_for_jobs": false
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "repository_password"
              }
            ]
          ],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "kubernetes_namespace.airflow"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "kubernetes_namespace",
      "name": "airflow",
      "provider": "provider[\"registry.terraform.io/hashicorp/kubernetes\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "airflow",
            "metadata": [
              {
                "annotations": {},
                "generate_name": "",
                "generation": 0,
                "labels": {},
                "name": "airflow",
                "resource_version": "151282",
                "uid": "29f5e66a-8971-45ea-8b22-e9d145becc90"
              }
            ],
            "timeouts": null,
            "wait_for_default_service_account": false
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjozMDAwMDAwMDAwMDB9fQ=="
        }
      ]
    }
  ],
  "check_results": null
}
